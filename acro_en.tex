% arara: pdflatex
% arara: makeindex: { sort: true, style: acro_en.ist }
% arara: biber
% arara: pdflatex
% arara: pdflatex
% --------------------------------------------------------------------------
% the ACRO package
% 
%   Typeset Acronyms
% 
% 2012/06/22
% --------------------------------------------------------------------------
% Clemens Niederberger
% Web:    https://bitbucket.org/cgnieder/acro/
% E-Mail: contact@mychemistry.eu
% --------------------------------------------------------------------------
% Copyright 2011-2012 Clemens Niederberger
% 
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
% 
% This work has the LPPL maintenance status `maintained'.
% 
% The Current Maintainer of this work is Clemens Niederberger.
% --------------------------------------------------------------------------
% The acro package consists of the files
%  - acro.sty, acro_en.tex, acro_en.pdf, README
% --------------------------------------------------------------------------
% If you have any ideas, questions, suggestions or bugs to report, please
% feel free to contact me.
% --------------------------------------------------------------------------
%
% if you want to compile this documentation you'll need the document class
% `cnpkgdoc' which you can get here:
%    https://bitbucket.org/cgnieder/cnpkgdoc/
% the class is licensed LPPL 1.3 or later
%
\documentclass[DIV10,toc=index,toc=bib]{cnpkgdoc}
\usepackage[osf]{libertine}
\docsetup{
  pkg = [single]acro ,
  code-box = {
    backgroundcolor  = gray!7!white ,
    skipbelow        = .6\baselineskip plus .5ex minus .5ex ,
    skipabove        = .6\baselineskip plus .5ex minus .5ex
  } ,
  gobble   = 1
}

\acsetup{hyperref}

\cnpkgcolors{
  main   => cnpkgred ,
  key    => yellow!40!brown ,
  module => cnpkgblue ,
  link   => black!90
}

\renewcommand*\othersectionlevelsformat[3]{%
  \textcolor{main}{#3\autodot}\enskip}
\renewcommand*\partformat{%
  \textcolor{main}{\partname~\thepart\autodot}}

\addcmds{
  ac,
  aca,
  acap,
  acf,
  acfp,
  acl,
  aclp,
  acp,
  acreset,
  AcronymFormat,
  acs,
  acsetup,
  acsp,
  NewAcronym,
  newlist,
  printacronyms,
  setlist
}

\usepackage{filecontents}

\usepackage[backend=biber,style=alphabetic]{biblatex}
\addbibresource{\jobname.bib}

\begin{filecontents}{\jobname.bib}
@online{wikipedia,
  author  = {Wikipedia},
  title   = {Acronym and initialism},
  urldate = {2012-06-21},
  url     = {http://en.wikipedia.org/wiki/Acronyms}
}
\end{filecontents}

\usepackage{makeidx}

\begin{filecontents}{\jobname.ist}
 heading_prefix "{\\bfseries "
 heading_suffix "\\hfil}\\nopagebreak\n"
 headings_flag  1
 delim_0 "\\dotfill "
 delim_1 "\\dotfill "
 delim_2 "\\dotfill "
 delim_r "\\textendash"
 suffix_2p "\\nohyperpage{\\,f.}"
 suffix_3p "\\nohyperpage{\\,ff.}"
\end{filecontents}

\TitlePicture{\parbox{.75\linewidth}{%
  \acro not only allows you to create acronyms in a simple way but also lets you
  add them to different classes of acronyms. Lists can be created of seperate classes
  wherever you want the list to appear.\par
  \acro also provides an option \key{single} which ignores acronyms that are used
  only once in the whole document.}}

\usepackage{fnpct,longtable,enumitem,ragged2e}

\newcommand*\wikipedia{\libertineGlyph{W.alt}\kern-.055em\textsc{ikipedia}}
\let\h\uline

\NewAcronym{cd}   {cd}             {Compact Disc}
  \AcronymFormat{cd}{\scshape}
\NewAcronym{id}   {id}             {identification string}
  \AcronymFormat{id}{\scshape}
\NewAcronym{jpg}  {JPG}[JPEG]      {Joint Photographic Experts Group}
\NewAcronym{la}   {LA,}            {Los Angeles,}[city]
\NewAcronym*{mp}  {MP}             {Member of Parliament,Members of Parliament}
\NewAcronym{nato} {nato}           {North Atlantic Treaty Organization}{\textit{deutsch}: Organisation des Nordatlantikvertrags}
  \AcronymFormat{nato}{\scshape}
\NewAcronym{ny}   {NY,}            {New York,}[city]
\NewAcronym{ot}   {ot}             {Other Test}
  \AcronymFormat{ot}{\scshape}
\NewAcronym{sw}   {SW}             {Sammelwerk,e}
\NewAcronym{test} {ST}             {Some Test}
\NewAcronym{texse}{\{TeX\}.SE}     {\TeX\ StackExchange}

\makeindex
\begin{document}
\newpage
\section{Licence and Requirements}
\acro is placed under the terms of the LaTeX Project Public License,
version 1.3 or later (\url{http://www.latex-project.org/lppl.txt}).
It has the status ``maintained.''

\acro loads and needs the following packages: \paket{expl3},
\paket{xparse}, \paket{xtemplate} and \paket{l3keys2e}.

\section{About}
\begin{zitat}[\cite{wikipedia}]
 Acronyms and initialisms are abbreviations formed from the initial components
 in a phrase or a word. These components may be individual letters (as in CEO)
 or parts of words (as in Benelux and Ameslan). There is no universal agreement
 on the precise definition of the various terms nor on written usage.
\end{zitat}
After \wikipedia\ told us what acronyms are -- why do we need another package
for them? There are several already: \paket{acronym}, \paket{acromake},
\paket{acroterm}, the abbreviations package \paket{abbrevs} (which has a bug%
\footnote{\url{http://tex.stackexchange.com/q/59840/5049}}, though), and of
course the mighty \paket{glossaries}. So there is \emph{really} no reason for a
new package.

The main reason for the existance of \acro is a question on \acs{texse}%
\footnote{\url{http://tex.stackexchange.com/q/59449/5049}}, which intrigued me
and in consequence led to \acro and it's option \key{single}.

\acro has very much similarities with the \paket{acronym} package. In fact, quite
some macros have the same name and meaning\footnote{\emph{Not} in the sense of
\code{\textbackslash\textcolor{code}{meaning}}!}.

\section{Basics}\secidx{Basics}
\subsection{Creating New Acronyms}\secidx[new acronyms]{Basics}
Acronyms are created with the command \cmd{NewAcronym} that can only be used in
the preamble.
\begin{beschreibung}
 \Befehl{NewAcronym}*{<id>}\ma{<short>,<pl>}\oa{<alt.>}\ma{<long>,<pl>}\ma{<extra>}\oa{<class>}
 \verb+% can be used only in preamble+
 \Befehl{AcronymFormat}{<id>}\ma{<format>} \verb+% can be used only in preamble+
\end{beschreibung}
Although this command has quite a number of arguments. In the simplest case you'll
only need three:
\begin{beispiel}[code only]
 % preamble
 \NewAcronym{test}{ST}{Some Test}
\end{beispiel}
This creates the acronym \acs{test} with the \acs{id} \code{test} and the long form
``\acl{test}''. The other arguments will be described later in this document.

If you want to assign a special format to an acronym you can do that with
\cmd{AcronymFormat}.
\begin{beispiel}[code only]
 % preamble:
 \NewAcronym{ot}{ot}{Other Test}
 \AcronymFormat{ot}{\scshape}
\end{beispiel}
This now looks like this: \acs{ot}.

\subsection{Using the Acronyms -- the Commands}\secidx[using acronyms]{Basics}
Acronyms are used with with one of the following commands:
\begin{beschreibung}
 \befehl{ac} basic command; the first output is different from subsequent ones.
 \befehl{acs} \h{s}hort form; the actual acronym.
 \befehl{acl} \h{l}ong form; the meaning of the acronym.
 \befehl{aca} \h{a}lternative short form as specified in the \oa{<short>} argument
 of \cmd{NewAcronym}; if it hasn't been specified this is identical to \cmd{acs}.
 \befehl{acf} first form; output like the first time \cmd{ac} is output.
 \befehl{acp} \h{p}lural form of \cmd{ac};
 \befehl{acsp} plural form of \cmd{acs};
 \befehl{aclp} plural form of \cmd{acp};
 \befehl{acap} plural form of \cmd{aca};
 \befehl{acfp} plural form of \cmd{acf};
\end{beschreibung}
If an acronym is used the first time with \cmd{ac} its output is different from
subsequent uses. To be clear on this: the first time! If the acronym has been
used with \emph{any} of the output commands before it is \emph{not} the first
time any more.

\begin{beispiel}
 % preamble: \NewAcronym{cd}{cd}{Compact Disc}
 % \AcronymFormat{cd}{\scshape}
 first time: \ac{cd} \\
 second time: \ac{cd} \\
 short: \acs{cd} \\
 alternative: \aca{cd} \\
 long: \acl{cd} \\
 short plural: \acsp{cd} \\
 long plural: \aclp{cd}
\end{beispiel}

\subsection{Plural Forms}\secidx[plural forms]{Basics}
If an acronym is defined in the standard way \acro uses an `s' that's appended to
both the short and the long form when one of the plural commands is used. However,
that is not always the best solution. For one thing not all acronyms may have a
plural form. Second, the plural form especially of the long forms may be fomed
differently. And third, other languages can have other plural endings.

For this reason \cmd{NewAcronym} provides additional arguments:
\begin{beschreibung}
 \Befehl{NewAcronym}{<id>}\ma{<short>,<plural ending>}\ma{<long>,<plural ending>}
 \Befehl{NewAcronym}*{<id>}\ma{<short>,<plural ending>}\ma{<long>,<plural form>}
\end{beschreibung}
These arguments are optional. If they're not used, the default setting is `s'.
If you use the starred version long form will be replaced by the specifies plural
form when necessary. A given short plural will still be appended.

\begin{beispiel}
 % preamble:
 % \NewAcronym{cd}{\textsc{cd}}{Compact Disc}
 %   \AcronymFormat{cd}{\scshape}
 % \NewAcronym{ny}{NY,}{New York,}
 % \NewAcronym{sw}{SW}{Sammelwerk,e}
 % \NewAcronym*{mp}{MP}{Member of Parliament,Members of Parliament}
 \acsp{cd}, \aclp{cd} \\
 \acsp{ny}, \aclp{ny} \\
 \acsp{sw}, \aclp{sw} \\
 \acsp{mp}, \aclp{mp}
\end{beispiel}

\subsection{Alternative Short Forms}\secidx[alternative forms]{Basics}
For some acronyms it might be useful to have alternative forms, maybe because
they're written differently at the beginning of a sentence. For this \cmd{NewAcronym}
has an optional argument:
\begin{beschreibung}
 \Befehl{NewAcronym}{<id>}\ma{<short>}\oa{<alternative>}\ma{<long>}
\end{beschreibung}
\begin{beispiel}
 % preamble \NewAcronym{jpg}{JPG}[JPEG]{Joint Photographic Experts Group}
 default: \acs{jpg} \\
 alt.: \aca{jpg}
\end{beispiel}
The alternative form uses the same plural ending as the default short form and
is formatted in the same way.

\subsection{Extra Information for the List Entry}\secidx[extra information]{Basics}
Of course you can print a list of acronyms where there meaning is explained.
Sometimes it can useful to add additional information there. This is done with
another optional argument to \cmd{NewAcronym}:
\begin{beschreibung}
 \Befehl{NewAcronym}{<id>}\ma{<short>}\ma{<long>}\ma{<extra>}
\end{beschreibung}
These information will only be displayed in the list. See section \ref{sec:print_lists}
for the impact of the following example.

\begin{beispiel}
 % preamble:
 % \NewAcronym{nato}{nato}{North Atlantic Treaty Organization}{\textit{deutsch}: Organisation des Nordatlantikvertrags}
 % \AcronymFormat{nato}{\scshape}
 The \ac{nato} is an intergovernmental military alliance based on the
 North Atlantic Treaty which was signed on 4~April 1949. \ac{nato}
 headquarters are in Brussels, Belgium, one of the 28 member states
 across North America and Europe, the newest of which, Albania and
 Croatia, joined in April 2009.
\end{beispiel}
\secidx*{Basics}

\section{Additional Commands}\secidx{Additional Commands}
\subsection{Using Classes}\secidx[classes]{Additional Commands}
The acronyms of \acro can be divided into different classes. This doesn't change
the output but allows different acronym lists, see section \ref{sec:print_lists}.
For this \cmd{NewAcronym} has an optional argument:
\begin{beschreibung}
 \Befehl{NewAcronym}{<id>}\ma{<short>}\ma{<long>}\oa{<class>}
\end{beschreibung}
\begin{beispiel}
 % preamble:
 % \NewAcronym{la}{LA,}{Los Angeles,}[city]
 % \NewAcronym{ny}{NY,}{New York,}[city]
 \acl{la} (\acs{la}) \\
 \acl{ny} (\acs{ny})
\end{beispiel}
This might be useful if you can divide your acronyms into different types,
technical and grammatical ones, say.

\subsection{Resetting}\secidx[resetting]{Additional Commands}
If you want for some reason to fool \acro into thinking that an acronym is used
for the first time you can call this command:
\begin{beschreibung}
 \Befehl{acreset}
\end{beschreibung}
\begin{beispiel}
 \acreset
 \ac{ny}
\end{beispiel}
Beware that this command acts \emph{globally} and effects \emph{all} acronyms!
\secidx*{Additional Commands}

\section{Printing the List}\label{sec:print_lists}\secidx{Printing the List}
Printing the whole list of acronyms is easy: just place \cmd{printacronyms}
wherever you want the list to be.
\begin{beschreibung}
 \befehl{printacronyms}{<list of classes>} the \emph{optional} argument takes a
 comma-separated list of the classes of acronyms that should in the list. If the
 argument is left out, \emph{all} acronyms are printed.
\end{beschreibung}
\begin{beispiel}[below]
 \acsetup{hyperref=false,extra-style=comma}
 \printacronyms
 \acsetup{list-name=City Acronyms}
 \printacronyms{city}
\end{beispiel}
You can see that the default layout is a \code{description} list with a
\code{section*} title. Both can be changed, see section \ref{sec:customization}.
\secidx*{Printing the List}

\section{Customization}\label{sec:customization}\secidx{Customization}
\subsection{General Options}\secidx[general options]{Customization}
There are a few options which change the general behaviour of \acro.
\begin{beschreibung}
 \option{single}{\default{true}/false} if set to true an acronym that's used only
 once in a document will only print the long form and will not be printed in the
 list.
 \option{hyperref}{\default{true}/false} if set to true the short forms of the
 acronyms will be linked to their list entry.
 \option{only-used}{\default{true}/false} this option is true as default. It means
 that only acronyms that are actually used in the document are printed in the list.
 If false, all acronyms defined with \cmd{NewAcronym} will be written in the list.
\end{beschreibung}

All options of this and the following sections can be set up either as package
options or via the setup command:
\begin{beschreibung}
 \Befehl{acsetup}{<options>}
\end{beschreibung}

\subsection{Options Regarding Acronyms}\secidx[acronyms]{Customization}
The options described in this section all influence the layout of one of the
possible output forms of the acronyms.
\begin{beschreibung}
 \option{short-format}{<format>} sets a format for all short forms. For example
 \key{short-format}{\cmd{scshape}} would print all short forms in small caps.
 \option{long-format}{<format>} the same for the long forms.
 \option{extra-format}{<format>} the same for the extra information.
 \option{first-style}{default/footnote/square} the basic style of the first
 appearance of an acronym.
 \option{extra-style}{plain/comma/paren/bracket} define the way the extra
 information is printed in the list.
\end{beschreibung}

\begin{beispiel}
 % (Keep in mind that we're in
 % a minipage here!)
 \acsetup{first-style=footnote}
 \acf{ny}
\end{beispiel}

\subsection{Options Regarding the List}\secidx[list]{Customization}
\begin{beschreibung}
 %%
 \option{page-ref}{none/plain/comma/paren} The style with which the page number of
 the first appearance of the acronym in the text is displayed. Default: \code{none}
 %%
 \option{page-name}{<page name>} The ``name'' of the page label. Default: \code{p.}
 %%
 %%
 \option{list-type}{table/<list>} This option let's you choose how the list is
 printed. \code{<list>} can be any valid list like \code{itemize} or \code{description}.
 Default: \code{description}.
 \option{table-style}{tabular/longtable} If you choose \key{list-type}{table}
 you have to specify which kind of table should be used. If you choose \code{longtable}
 you have to \verb+\usepackage{longtable}+ in your preamble.
 %%
 \option{list-header}{chapter/chapter*/section/section*/subsection/subsection*}
 The header type of the list. Default: \code{section*}
 %%
 \option{list-name}{<list name>} The name of the list. This is what's written in
 the list-header. Default: \code{Acronyms}
 %%
 \option{list-table-width} this has only an effect if you chose \key{list-type}{table}.
 the second column of the table is a \code{p} column whose width can be specified
 with this option. Default: \verb+.7\linewidth+
\end{beschreibung}

If you for example have loaded \paket{enumitem} you can define a custom list for
the acronym list:
\begin{beispiel}
 % preamble:
 % \usepackage{enumitem}
 \newlist{acronyms}{description}{1}
 \setlist[acronyms]{labelwidth=2.5em,leftmargin=3em,noitemsep,itemindent=0pt}
 \acsetup{list-type=acronyms,hyperref=false,extra-style=comma}
 \printacronyms
\end{beispiel}
\secidx*{Customization}

\section{\paket{hyperref} Support}\secidx{\paket{hyperref} support}[hyperref Support]
The option \key{hyperref}{true} adds internal links from all short (or alternative)
forms to the respective list entry. You should use this option with care: if
you don't use \cmd{printacronyms} anywhere this option will result in loads of
\paket{hyperref} warnings. Also printing several list can result in warnings
if don't clearly separate the list into different classes. If an acronym appears
in more than one list there will also be more than one hypertarget for this
acronym.
\secidx*{\paket{hyperref} support}[hyperref Support]

\appendix
\section{All Acronyms Used in this Documentation}\label{sec:documentation_acronyms}
\begin{beispiel}[code only]
 \acsetup{
   list-type   = table,
   table-style = longtable,
   list-header = subsection*,
   extra-style = comma,
   page-ref    = comma,
   list-name   = All Acronyms}
 \printacronyms
\end{beispiel}
\acsetup{
  list-type   = table,
  table-style = longtable,
  list-header = subsection*,
  extra-style = comma,
  page-ref    = comma,
  list-name   = All Acronyms}
\printacronyms

\begin{beispiel}[code only]
 \acsetup{
   list-type   = table,
   table-style = longtable,
   list-header = subsection*,
   page-ref    = comma,
   list-name   = City-Acronyms}
 \printacronyms{city}
\end{beispiel}
\acsetup{list-name=City-Acronyms}
\printacronyms{city}

{\RaggedRight
\printbibliography}

\setindexpreamble{Section titles are indicated \textbf{bold}, packages
\textsf{sans serif}, commands \code{\textbackslash\textcolor{code}{brown}}
 and options \textcolor{key}{\code{yellow}}.\par\bigskip}
\printindex
\end{document}
% TODO:
- \jobname.ist
- Default-Werte